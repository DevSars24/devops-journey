
In this guide, we will build and dockerise a full-stack application with the following components:

ğŸŒ Frontend (Vite app served via Nginx)
âš™ï¸ Backend (Node.js + Express + PostgreSQL client)
ğŸ—„ï¸ Database (PostgreSQL with persistent storage)
ğŸ“¦ Docker Compose (to orchestrate all services)
```bash

ğŸ—ï¸ Project Structure
fullstack-docker/
â”£ ğŸ“‚ backend/        # Node.js + Express backend
â”ƒ â”£ ğŸ“œ index.js
â”ƒ â”£ ğŸ“œ package.json
â”ƒ â”— ğŸ“œ Dockerfile
â”£ ğŸ“‚ frontend/       # Vite app served with Nginx
â”ƒ â”£ ğŸ“œ package.json
â”ƒ â”— ğŸ“œ Dockerfile
â”£ ğŸ“œ docker-compose.yml
â”— ğŸ“œ .env            # Environment variables

âš™ï¸ Backend (Node.js + Express + PostgreSQL)

Dockerfile (backend/Dockerfile):


FROM node:22-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install

COPY . .

EXPOSE 8000

CMD ["npm", "start"]


ğŸŒ Frontend (Vite + Nginx)

We use multi-stage builds âš¡:
Builder stage â†’ Build the Vite app â†’ produces dist/
Serve stage â†’ Serve dist/ folder via Nginx
Dockerfile (frontend/Dockerfile):

# Builder stage
FROM node:22-alpine AS builder
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

# Serve stage
FROM nginx:alpine
COPY --from=builder /app/dist /usr/share/nginx/html
EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]

ğŸ—„ï¸ Database (PostgreSQL with Persistent Volume)

We wonâ€™t write a custom Dockerfile.
Weâ€™ll use the official Postgres image:
Uses credentials from .env
Mounts a volume for persistent storage

ğŸ”‘ Environment Variables

Create a .env file in project root:

# Backend
PORT=8000

# Database
DB_USER=postgres
DB_PASSWORD=postgrespassword
DB_NAME=mydb
DB_HOST=db
DB_PORT=5432

ğŸ“¦ Docker Compose (docker-compose.yml)

This file connects all services together:
version: "3.9"

services:
  backend:
    build: ./backend
    container_name: backend
    ports:
      - "8000:8000"
    env_file: .env
    depends_on:
      - db

  frontend:
    build: ./frontend
    container_name: frontend
    ports:
      - "3000:80"
    depends_on:
      - backend

  db:
    image: postgres:15
    container_name: postgres-db
    restart: always
    environment:
      POSTGRES_USER: ${DB_USER}
      POSTGRES_PASSWORD: ${DB_PASSWORD}
      POSTGRES_DB: ${DB_NAME}
    volumes:
      - db_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

volumes:
  db_data:

ğŸ”„ Flow Diagram (Symbols & Signs)
 ğŸŒ Frontend (React/Vite) â”€â”€â–¶  âš™ï¸ Backend (Node.js + Express) â”€â”€â–¶  ğŸ—„ï¸ PostgreSQL
        â”‚                               â”‚                               â”‚
        â–¼                               â–¼                               â–¼
    Served via                       Talks to DB                  Persistent Volume
     ğŸš€ Nginx                        using PG lib                   (db_data:/...)

ğŸš€ Commands to Run

Build & Start Everything
docker-compose up --build
Check Running Containers

docker ps


Stop Everything
docker-compose down
Stop but Keep Volumes

docker-compose down -v

âœ… Summary

ğŸ“‚ Backend: Node.js containerized
ğŸŒ Frontend: Vite app built â†’ served via Nginx
ğŸ—„ï¸ Database: Postgres with persistent volume

ğŸ“¦ Docker Compose: Orchestrates them all

ğŸ”‘ .env: Central place for credentials
