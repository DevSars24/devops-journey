ğŸš€âœ¨ Dockerfile: Multi-Stage Build for Optimized Node.js App âœ¨ğŸš€

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘              ğŸ³ DOCKERFILE DOCUMENTATION ğŸ³        â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ› ï¸ Dockerfile Content
dockerfile

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘   ğŸš€ Stage 1: Builder Stage (Dependencies)     â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FROM node:22-alpine AS builder   # Use tiny Alpine Node.js image
WORKDIR /app                     # Create and use /app folder
COPY package*.json ./            # Copy package files first
RUN npm install                  # Install dependencies
COPY . .                         # Copy rest of the source code

# â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
# â•‘   ğŸš€ Stage 2: Production Stage (Final Image)  â•‘
# â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FROM node:22-alpine              # Start fresh for final image
WORKDIR /app                     # Working directory
COPY --from=builder /app /app    # Copy built app from builder

ENV PORT=3000                    # Default app port
EXPOSE 3000                      # Expose container port

# Entry point: start the app ğŸš€
CMD ["node", "index.js"]
ğŸ“– Line-by-Line Explanation
ğŸ”¹ FROM node:22-alpine AS builder â†’ Lightweight Node.js base + alias builder
ğŸ”¹ WORKDIR /app â†’ Set working directory inside container
ğŸ”¹ COPY package*.json ./ â†’ Copy package.json + package-lock.json
ğŸ”¹ RUN npm install â†’ Install dependencies inside container
ğŸ”¹ COPY . . â†’ Copy all project files

ğŸ”¹ FROM node:22-alpine â†’ New, clean, small image for production
ğŸ”¹ COPY --from=builder /app /app â†’ Copy only needed build files
ğŸ”¹ ENV PORT=3000 â†’ Default port as env var (can be overridden)
ğŸ”¹ EXPOSE 3000 â†’ Docker docs + networking
ğŸ”¹ CMD ["node", "index.js"] â†’ Start app

ğŸ¯ How to Build & Run

# ğŸ—ï¸ Build the Docker image
docker build -t fancy-node-app .

# â–¶ï¸ Run the container on port 4000 (maps host 4000 â†’ container 3000)
docker run -p 4000:3000 --rm fancy-node-app
ğŸŒ Open browser â†’ http://localhost:4000 ğŸ‰

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            ğŸ’¡ TIP: Keep Images Slim!               â•‘
â•‘  âœ”ï¸ Use multi-stage builds                         â•‘
â•‘  âœ”ï¸ Copy only what's needed                        â•‘
â•‘  âœ”ï¸ Avoid dev-dependencies in production           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
This file has:

Boxes & dividers (â•”â•â•â•â•£ â•‘ â•šâ•â•â•)
Emojis for sections (ğŸ³, ğŸš€, ğŸ¯)
Clear structure (Stages â†’ Explanation â†’ Run steps)
Stylish look to make revision easy & fun
