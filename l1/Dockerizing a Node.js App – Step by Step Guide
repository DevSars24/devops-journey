ðŸ“‚ File Structure

express/
â”‚
â”œâ”€â”€ Dockerfile        # Instructions to build Docker image
â”œâ”€â”€ package.json      # Node.js dependencies and scripts
â”œâ”€â”€ package-lock.json # (auto-generated) dependency lock file
â””â”€â”€ index.js          # Main Node.js server file

ðŸ“‘ Role of Each File


index.js â†’ Starts the Express server and handles routes.
package.json â†’ Lists dependencies (express) and project info.
Dockerfile â†’ Blueprint for creating a container image of our app.

âš™ï¸ index.js (Node.js server code)

const express = require('express');
const app = express();

// use process.env.PORT so Docker can inject environment variable
const port = process.env.PORT || 3000;

app.get('/', (req, res) => {
  res.send("ðŸ‘‹ Hello world from a Dockerised app!");
});

app.listen(port, () => {
  console.log(`âœ… Example app listening on port ${port}`);
});
ðŸ³ Dockerfile
dockerfile
# 1. Use official Node.js runtime
FROM node:22-alpine

# 2. Set working directory inside container
WORKDIR /app

# 3. Copy package.json and package-lock.json first
COPY package*.json ./

# 4. Install dependencies
RUN npm install

# 5. Copy all project files
COPY . .

# 6. Set environment variable for port
ENV PORT=3000

# 7. Start the app
CMD ["node", "index.js"]
ðŸ”¥ Commands We Used
Build Docker image

docker build -t express-app .
-t express-app â†’ tag the image with name express-app.

Run Docker container
docker run -p 4000:3000 --rm express-app
-p 4000:3000 â†’ maps host 4000 â†’ container 3000.

--rm â†’ removes container when stopped.

âŒ Problems Faced & âœ… Fixes

Empty Dockerfile error
Cause â†’ Dockerfile was empty / invalid.
Fix â†’ Write proper Dockerfile with Node.js setup.

Wrong ENV syntax

dockerfile
ENV PORT = 3000   # âŒ wrong
ENV PORT=3000     # âœ… correct
Invalid docker run command

docker run -p 4000:3000 -e port = 3000 -rm express-app  # âŒ wrong
docker run -p 4000:3000 --rm express-app                # âœ… correct
Localhost refused to connect

Cause â†’ container was running, but host could not access it.

Fix â†’ Use port mapping (-p 4000:3000).

ðŸ”€ Port Mapping Explained
Inside Docker container:

Node.js app listens on port 3000.
On host machine:
We mapped 4000 â†’ 3000 with -p 4000:3000.

So we access the app at:
ðŸ‘‰ http://localhost:4000

Host (4000)  --->  Container (3000)
ðŸŽ‰ Final Output
When you open http://localhost:4000, you see:

css
Copy
Edit
ðŸ‘‹ Hello world from a Dockerised app!
âœ¨ Thatâ€™s it! Youâ€™ve successfully containerized a Node.js app with Docker.
