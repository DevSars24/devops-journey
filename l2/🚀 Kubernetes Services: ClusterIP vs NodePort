ğŸš€ 1. What is a Kubernetes Service?

A Service in Kubernetes provides a stable way to access your Pods. Since Pods are ephemeral (they can die and restart), services act as a networking abstraction to ensure traffic always finds the right Pods.

There are different types of services:

ğŸ”¹ ClusterIP â†’ Default, accessible inside the cluster only
ğŸ”¹ NodePort â†’ Exposes the service outside the cluster via a static port on each Node
ğŸ”¹ LoadBalancer â†’ Integrates with Cloud Providers for external load balancing

In this demo, weâ€™ll focus on ClusterIP and NodePort.

ğŸ›  2. Deploying Nginx (Demo Application)
Letâ€™s start with a simple Nginx Deployment.
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# nginx-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
ğŸ‘‰ Apply it:

kubectl apply -f nginx-deployment.yaml
Check if Pods are running:

kubectl get pods --show-labels
âœ… You should see 3 Pods with the label:

app=nginx
ğŸŒ 3. Exposing Deployment with a Service (ClusterIP)
Step 1: Declarative Service YAML
Instead of using imperative commands (kubectl expose ...), weâ€™ll create a service YAML:

# service-clusterip.yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-clusterip-service
spec:
  selector:
    app: nginx   # selects pods with this label
  ports:
    - port: 80          # service port
      targetPort: 80    # container port
  type: ClusterIP       # default, can even omit this
ğŸ‘‰ Apply it:

kubectl apply -f service-clusterip.yaml
Step 2: Verify Service

kubectl get svc
Expected Output:

NAME                       TYPE        CLUSTER-IP     PORT(S)   AGE
nginx-clusterip-service    ClusterIP   10.96.120.45   80/TCP    2m
Step 3: Check Endpoints


kubectl get endpoints
Youâ€™ll see 3 endpoints, one for each Pod:


nginx-clusterip-service   172.17.0.4:80, 172.17.0.5:80, 172.17.0.6:80
ğŸ“Œ Meaning:

Service forwards requests on port 80

Routes traffic to all 3 Nginx Pods

ğŸŒ 4. Exposing Deployment with a Service (NodePort)
Now letâ€™s make it accessible outside the cluster.

Step 1: NodePort YAML

# service-nodeport.yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-nodeport-service
spec:
  selector:
    app: nginx
  ports:
    - port: 80          # service port (internal cluster)
      targetPort: 80    # pod container port
      nodePort: 30080   # static port on Node
  type: NodePort


ğŸ‘‰ Apply it:
kubectl apply -f service-nodeport.yaml
Step 2: Verify Service

kubectl get svc
Expected Output:

NAME                       TYPE        CLUSTER-IP     PORT(S)          AGE
nginx-nodeport-service     NodePort    10.96.45.23    80:30080/TCP     2m
ğŸ“Œ Breakdown:

ClusterIP: 10.96.45.23 â†’ Internal cluster access

80:30080/TCP â†’

Port 80 inside cluster

Port 30080 on each Node (external access)

Step 3: Access Service
In a real Kubernetes cluster:

http://<NodeIP>:30080
In Minikube:

minikube service nginx-nodeport-service
This opens a browser automatically ğŸ‰

If successful â†’ You should see the â€œWelcome to Nginxâ€ page âœ…

ğŸ”‘ 5. Difference Between ClusterIP and NodePort
Feature	ClusterIP ğŸŒ (Default)	NodePort ğŸšª (External Access)
Accessibility	Internal only	Accessible from outside
Default?	âœ… Yes	âŒ No (must specify)
Port Assignment	Random Cluster IP	Static Node Port (30000â€“32767)
Use Case	Pod-to-Pod communication	Exposing apps to users

ğŸ“Š 6. Visualization
ClusterIP (Internal Traffic Only)

User âŒ
    |
  Service (ClusterIP: 10.96.x.x:80)
    |
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Nginx Pods  â”‚
  â”‚ 80          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
NodePort (External Traffic Allowed)
java
Copy
Edit
User ğŸŒ â†’ http://<NodeIP>:30080
    |
NodePort Service (80:30080)
    |
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Nginx Pods  â”‚
  â”‚ 80          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ… Conclusion
ClusterIP â†’ For internal communication within cluster

NodePort â†’ For external access on a fixed port

Always remember:

port â†’ Serviceâ€™s own port

targetPort â†’ Containerâ€™s port

nodePort â†’ Exposed Node port

Now you can safely expose services declaratively using YAML manifests ğŸ‰
